# å®¡æŸ¥è¯„è®ºå¤„ç†å·¥ä½œæµæŒ‡å—

> æœ€åæ›´æ–°: 2026-02-24

## å¿«é€Ÿå…¥é—¨

æœ¬æ–‡æ¡£å¸®åŠ©æ–° agent å¿«é€Ÿç†è§£å®¡æŸ¥è¯„è®ºå¤„ç†æµç¨‹ã€‚

## æ ¸å¿ƒæ¦‚å¿µ

### æ“ä½œå¯¹è±¡ vs å‚è€ƒå¯¹è±¡

| ç±»å‹ | æ¨¡å‹ | ç”¨é€” | æ“ä½œ |
|------|------|------|------|
| **Thread** | `ReviewThreadState` | ä¸»è¦æ“ä½œå¯¹è±¡ | å¯è§£å†³ã€å¯å›å¤ |
| **Overview** | `ReviewOverview` | åªè¯»å‚è€ƒ | å¯ç¡®è®¤å·²é˜…è¯» |
| **IssueCommentOverview** | `IssueCommentOverview` | åªè¯»å‚è€ƒ | ä»…é˜…è¯»ï¼Œä¸å¯æ“ä½œ |

**é‡è¦**ï¼šAgent ä¸»è¦æ“ä½œ Thread æ•°æ®ã€‚Overview ç”¨äºäº†è§£ PR æ•´ä½“è¯„ä»·å’Œé«˜å±‚å»ºè®®ã€‚

### ä¸‰ç§ AI å®¡æŸ¥å·¥å…·

| å·¥å…· | GitHub ç”¨æˆ·å | ç‰¹ç‚¹ | è§£å†³æ–¹å¼ |
|------|--------------|------|----------|
| **Sourcery** | `sourcery-ai bot` | ç»“æ„åŒ–æ‘˜è¦ï¼ˆPrompt for AI Agentsï¼‰ | `@sourcery-ai resolve` æˆ– API |
| **Qodo** | `qodo-code-review bot` | PR Reviewer Guideï¼ˆIssue Commentï¼‰ | ä»… API |
| **Copilot** | `Copilot AI` | ç®€å•è¯„è®ºï¼Œæ— ç»“æ„åŒ–æ‘˜è¦ | ä»… API |

## âš ï¸ æœ€å¸¸è§çš„é”™è¯¯ï¼šæ··æ·†ä»£ç å˜åŒ–æ‘˜è¦å’Œæ”¹è¿›æ„è§

### ä»£ç å˜åŒ–æ‘˜è¦ï¼ˆä¸æ˜¯æ”¹è¿›æ„è§ï¼ï¼‰

ä»¥ä¸‹å†…å®¹**ä¸éœ€è¦å¤„ç†**ï¼Œåªæ˜¯æè¿° PR åšäº†ä»€ä¹ˆï¼š

- **Sourcery**: "Reviewer's Guide"
- **Qodo**: "Review Summary by Qodo"

### æ”¹è¿›æ„è§æ‘˜è¦ï¼ˆéœ€è¦å¤„ç†ï¼ï¼‰

ä»¥ä¸‹å†…å®¹åŒ…å«å…·ä½“çš„æ”¹è¿›å»ºè®®ï¼š

- **Sourcery**: "Prompt for AI Agents"
- **Qodo**: "PR Reviewer Guide ğŸ”"

## enriched_context å­—æ®µ

æ¯ä¸ª Thread å¯èƒ½åŒ…å« `enriched_context`ï¼Œæä¾›ç»“æ„åŒ–çš„é—®é¢˜ä¿¡æ¯ï¼š

| å­—æ®µ | è¯´æ˜ | æ¥æº |
|------|------|------|
| `issue_type` | é—®é¢˜ç±»å‹ï¼ˆBug/Security/suggestionï¼‰ | Qodo Emoji æˆ– Sourcery Prompt |
| `issue_to_address` | é—®é¢˜æè¿° | Sourcery Prompt |
| `code_context` | ä»£ç ä¸Šä¸‹æ–‡ | Sourcery Prompt |

### é—®é¢˜åˆ†ç±»

| åˆ†ç±» | ç±»å‹ | è¡Œä¸º |
|------|------|------|
| **å¿…é¡»ä¿®å¤** | Bug, Security, Rule violation, Reliability, bug_risk, security | æŠ¥å‘Šç”¨æˆ·ï¼Œç­‰å¾…ä¿®å¤æŒ‡ä»¤ |
| **è‡ªä¸»å†³æ–­** | suggestion, Correctness, performance | æŠ¥å‘Šç”¨æˆ·ï¼Œè‡ªä¸»å†³æ–­ |

## CLI å‘½ä»¤

### è·å–è¯„è®º

```bash
python tools/manage_reviews.py fetch --owner OWNER --repo REPO --pr PR_NUMBER
```

### åˆ—å‡ºè¯„è®º

```bash
# è¡¨æ ¼æ ¼å¼ï¼ˆé»˜è®¤ï¼‰
python tools/manage_reviews.py list --status pending

# JSON æ ¼å¼
python tools/manage_reviews.py list --status pending --format json
```

### è§£å†³è¯„è®º

```bash
python tools/manage_reviews.py resolve --thread-id THREAD_ID --type code_fixed
```

### ç¡®è®¤æ€»è§ˆæ„è§

```bash
# ç¡®è®¤æ‰€æœ‰æ€»è§ˆæ„è§
python tools/manage_reviews.py acknowledge --all

# ç¡®è®¤å•ä¸ªæ€»è§ˆæ„è§
python tools/manage_reviews.py acknowledge --id OVERVIEW_ID
```

## çŠ¶æ€ç®¡ç†

### Thread çŠ¶æ€

| çŠ¶æ€ | è¯´æ˜ |
|------|------|
| `pending` | å¾…å¤„ç† |
| `resolved` | å·²è§£å†³ |
| `ignored` | å·²å¿½ç•¥ |

### Overview çŠ¶æ€

| çŠ¶æ€ | è¯´æ˜ |
|------|------|
| `pending` | å¾…ç¡®è®¤ |
| `acknowledged` | å·²ç¡®è®¤é˜…è¯» |

### è§£å†³ä¾æ®ç±»å‹

| ç±»å‹ | è¯´æ˜ | éœ€è¦å›å¤ |
|------|------|----------|
| `code_fixed` | ä»£ç å·²ä¿®å¤ | å¦ |
| `adopted` | å·²é‡‡çº³å»ºè®® | å¦ |
| `rejected` | æ‹’ç»å»ºè®® | æ˜¯ |
| `false_positive` | è¯¯æŠ¥ | æ˜¯ |
| `outdated` | è¿‡æ—¶ | å¦ |
| `manual_on_github` | åœ¨ GitHub ä¸Šæ‰‹åŠ¨è§£å†³ | å¦ |

## Agent å·¥ä½œæµç¤ºä¾‹

### å®Œæ•´éªŒæ”¶æµç¨‹

```
1. è·å–è¯„è®ºçŠ¶æ€
   python tools/manage_reviews.py list --status pending --format json

2. åˆ†ç±»å¤„ç†
   - éå† threadsï¼Œæ£€æŸ¥ enriched_context.issue_type
   - å¿…é¡»ä¿®å¤é¡¹ï¼ˆBug/Securityï¼‰â†’ åœæ­¢ï¼ŒæŠ¥å‘Šç”¨æˆ·
   - è‡ªä¸»å†³æ–­é¡¹ï¼ˆsuggestionï¼‰â†’ Agent å†³å®šæ˜¯å¦é‡‡çº³

3. è§£å†³å·²ä¿®å¤é¡¹
   python tools/manage_reviews.py resolve --thread-id ID --type code_fixed

4. æ‹’ç»ä¸é‡‡çº³é¡¹
   python tools/manage_reviews.py resolve --thread-id ID --type rejected --reply "åŸå› "

5. ç¡®è®¤æ€»è§ˆæ„è§
   python tools/manage_reviews.py acknowledge --all
```

### é—®é¢˜ç±»å‹åˆ¤æ–­ä»£ç 

```python
MUST_FIX_TYPES = {"Bug", "Security", "Rule violation", "Reliability", "bug_risk", "security"}

def is_must_fix(issue_type: str) -> bool:
    for type_name in MUST_FIX_TYPES:
        if type_name.lower() in issue_type.lower():
            return True
    return False
```

## å¸¸è§é—®é¢˜

### Q: å¦‚ä½•åŒºåˆ† Qodo çš„ Review Summary å’Œ PR Reviewer Guideï¼Ÿ

**A:**

- "Review Summary by Qodo" = ä»£ç å˜åŒ–æ‘˜è¦ï¼Œä¸æ˜¯æ”¹è¿›æ„è§
- "PR Reviewer Guide ğŸ”" = æ”¹è¿›æ„è§æ‘˜è¦ï¼Œéœ€è¦å¤„ç†

### Q: Sourcery çš„ Reviewer's Guide éœ€è¦å¤„ç†å—ï¼Ÿ

**A:** ä¸éœ€è¦ã€‚"Reviewer's Guide" æ˜¯ä»£ç å˜åŒ–æ‘˜è¦ï¼Œä¸æ˜¯æ”¹è¿›æ„è§ã€‚åº”è¯¥å¤„ç†çš„æ˜¯ "Prompt for AI Agents"ã€‚

### Q: Qodo çš„ PR Reviewer Guide å­˜å‚¨åœ¨å“ªé‡Œï¼Ÿ

**A:** å­˜å‚¨åœ¨ Issue Comments ä¸­ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è·å–ã€‚

### Q: å¦‚ä½•åˆ¤æ–­è¯„è®ºæ˜¯å¦å·²è§£å†³ï¼Ÿ

**A:**

1. é¦–å…ˆæ£€æŸ¥ GitHub åŸç”ŸçŠ¶æ€ `is_resolved`
2. ç„¶åæ£€æŸ¥æ–‡æœ¬æ ‡è®°ï¼š
   - Sourcery: `âœ… Addressed`
   - Qodo: `â˜‘`

### Q: enriched_context ä¸ºç©ºæ€ä¹ˆåŠï¼Ÿ

**A:**

- Qodo è¯„è®ºï¼šä» `primary_comment_body` è§£æ Emoji ç±»å‹
- Sourcery è¯„è®ºï¼šä» Prompt for AI Agents æ˜ å°„
- Copilot è¯„è®ºï¼šé»˜è®¤ä¸º "suggestion"

### Q: æ€»è§ˆæ„è§éœ€è¦è§£å†³å—ï¼Ÿ

**A:** æ€»è§ˆæ„è§æ— æ³•"è§£å†³"ï¼Œåªèƒ½"ç¡®è®¤"å·²é˜…è¯»ã€‚ä½¿ç”¨ `acknowledge` å‘½ä»¤ã€‚

## ä¸¥ç¦äº‹é¡¹

1. **ä¸¥ç¦ä¸€æ¬¡æ€§è§£å†³æ‰€æœ‰è¯„è®º**ï¼šæ¯ä¸ªè¯„è®ºå¿…é¡»å•ç‹¬å¤„ç†
2. **ä¸¥ç¦æ— ä¾æ®æ ‡è®°è§£å†³**ï¼šå¿…é¡»å…ˆç¡®è®¤é—®é¢˜å·²è§£å†³
3. **ä¸¥ç¦æ‰¹é‡æ“ä½œ**ï¼šå¿…é¡»é€ä¸ªè¯„è®ºå¤„ç†
4. **ä¸¥ç¦è·³è¿‡è¯´æ˜è¯„è®º**ï¼šrejected/false_positive å¿…é¡»å›å¤
5. **ä¸¥ç¦å¿½ç•¥å¿…é¡»ä¿®å¤é¡¹**ï¼šBug/Security ç±»å‹å¿…é¡»æŠ¥å‘Šç”¨æˆ·
6. **ä¸¥ç¦è·³è¿‡æ€»è§ˆæ„è§ç¡®è®¤**ï¼šæ€»è§ˆæ„è§åº”ç¡®è®¤å·²é˜…è¯»

## ç›¸å…³æ–‡æ¡£

- [è¯„è®ºå¤„ç†ç³»ç»Ÿè¯´æ˜](è¯„è®ºå¤„ç†ç³»ç»Ÿè¯´æ˜.md) - å®Œæ•´ç³»ç»Ÿæ–‡æ¡£
- [AI å®¡æŸ¥å·¥å…·å‚è€ƒæŒ‡å—ï¼ˆå½’æ¡£ï¼‰](archive/v1-ai-reviewer-guide.md) - é™çº§ç­–ç•¥
- [fetch-reviews Skill](../../.trae/skills/fetch-reviews/SKILL.md) - Skill ä½¿ç”¨è¯´æ˜
- [resolve-review-comment Skill](../../.trae/skills/resolve-review-comment/SKILL.md) - è§£å†³è¯„è®ºè¯´æ˜
- [acceptance-workflow Skill](../../.trae/skills/acceptance-workflow/SKILL.md) - å®Œæ•´éªŒæ”¶æµç¨‹

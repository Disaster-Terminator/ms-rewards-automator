# MCP é©±åŠ¨çš„å¼€å‘å·¥ä½œæµ

> æœ¬æ–‡æ¡£å®šä¹‰äº†åŸºäº MCP å·¥å…·é›†çš„ç°ä»£åŒ–å¼€å‘æµç¨‹ã€‚

## ç›®å½•

- [1. æ ¸å¿ƒç†å¿µ](#1-æ ¸å¿ƒç†å¿µ)
- [2. MCP å·¥å…·çŸ©é˜µ](#2-mcp-å·¥å…·çŸ©é˜µ)
- [3. 7 é˜¶æ®µéªŒæ”¶æµç¨‹](#3-7-é˜¶æ®µéªŒæ”¶æµç¨‹)
- [4. AI å®¡æŸ¥ç³»ç»Ÿ](#4-ai-å®¡æŸ¥ç³»ç»Ÿ)
- [5. Memory MCP çŸ¥è¯†ç®¡ç†](#5-memory-mcp-çŸ¥è¯†ç®¡ç†)
- [6. å®‰å…¨è¾¹ç•Œ](#6-å®‰å…¨è¾¹ç•Œ)

---

## 1. æ ¸å¿ƒç†å¿µ

| ä¼ ç»Ÿæ¨¡å¼ | MCP æ¨¡å¼ |
|----------|----------|
| Agent åªèƒ½è¯»å–æ—¥å¿— | Agent å¯ç›´æ¥æ“ä½œæµè§ˆå™¨ |
| éªŒæ”¶ä¾èµ–äººå·¥æ‰§è¡Œ | Playwright MCP è‡ªåŠ¨åŒ– |
| æ‰‹åŠ¨åˆ›å»º PR | GitHub MCP è‡ªåŠ¨åŒ– |

**åŸåˆ™**ï¼šèƒ½åŠ›ä¼˜å…ˆã€æ¸è¿›å¢å¼ºã€å®‰å…¨è¾¹ç•Œï¼ˆmerge/force-push éœ€äººå·¥ç¡®è®¤ï¼‰

---

## 2. MCP å·¥å…·çŸ©é˜µ

| MCP æœåŠ¡ | æ ¸å¿ƒèƒ½åŠ› | éªŒæ”¶é˜¶æ®µ |
|----------|----------|----------|
| **Playwright** | æµè§ˆå™¨è‡ªåŠ¨åŒ– | é˜¶æ®µ 4-5 |
| **GitHub** | PR ç®¡ç† | é˜¶æ®µ 6-7 |
| **Memory** | çŸ¥è¯†æŒä¹…åŒ– | å…¨æµç¨‹ |

### 2.1 Playwright MCP

```python
playwright_navigate(url, browserType="chromium", headless=True, timeout=300000)
start_codegen_session(options={"outputPath": "tests/e2e/"})
```

### 2.2 GitHub MCP

```python
create_pull_request(owner, repo, title, head, base, body)
get_pull_request_reviews(owner, repo, pull_number)
merge_pull_request(owner, repo, pull_number, merge_method="squash")
```

### 2.3 Memory MCP

```python
create_entities(entities=[{"name": "xxx", "entityType": "Component", "observations": [...]}])
search_nodes(query="ç™»å½•æµç¨‹")
```

---

## 3. 7 é˜¶æ®µéªŒæ”¶æµç¨‹

```
é˜¶æ®µ 1-3: CI è‡ªåŠ¨åŒ–ï¼ˆé™æ€æ£€æŸ¥ â†’ å•å…ƒæµ‹è¯• â†’ é›†æˆæµ‹è¯•ï¼‰
é˜¶æ®µ 4-5: MCP æ— å¤´éªŒæ”¶ï¼ˆDevæ— å¤´ â†’ Useræ— å¤´ï¼‰
é˜¶æ®µ 6-7: PR ç®¡ç†ï¼ˆåˆ›å»ºPR â†’ ç­‰å¾…å®¡æŸ¥ â†’ åˆå¹¶ç¡®è®¤ï¼‰
```

### 3.1 é˜¶æ®µå®šä¹‰

| é˜¶æ®µ | å†…å®¹ | æ‰§è¡Œè€… | é€šè¿‡æ¡ä»¶ |
|------|------|--------|----------|
| 1. é™æ€æ£€æŸ¥ | ruff + mypy | CI | æ— é”™è¯¯ |
| 2. å•å…ƒæµ‹è¯• | pytest unit | CI | å…¨éƒ¨é€šè¿‡ |
| 3. é›†æˆæµ‹è¯• | pytest integration | CI | å…¨éƒ¨é€šè¿‡ |
| 4. Dev æ— å¤´ | `rscore --dev --headless` æˆ– `python main.py --dev --headless` | Agent | é€€å‡ºç  0 |
| 5. User æ— å¤´ | `rscore --user --headless` æˆ– `python main.py --user --headless` | Agent | æ— ä¸¥é‡é—®é¢˜ |
| 6. åˆ›å»º PR | GitHub MCP | Agent | PR åˆ›å»ºæˆåŠŸ |
| 7. åˆå¹¶ PR | äººå·¥ç¡®è®¤ | äººå·¥ | è§£å†³æ‰€æœ‰å¯¹è¯åç¡®è®¤ |

### 3.2 å‘½ä»¤ä¼˜å…ˆçº§

```bash
# ä¼˜å…ˆä½¿ç”¨ CLI å…¥å£ï¼ˆéœ€è¦ pip install -e .ï¼‰
rscore --dev --headless

# å¦‚æœ rscore ä¸å¯ç”¨ï¼Œé™çº§åˆ° main.py
python main.py --dev --headless
```

### 3.3 ç¯å¢ƒè¯Šæ–­

å¦‚æœå‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œå…ˆæ£€æŸ¥ç¯å¢ƒï¼š

```bash
pip show rewards-core  # æ£€æŸ¥æ˜¯å¦å®‰è£…
pip install -e ".[test]"  # å®‰è£…é¡¹ç›®åŠæµ‹è¯•ä¾èµ–
```

### 3.4 é˜»å¡ç‚¹

- **é˜¶æ®µ 6 å**ï¼šç­‰å¾… AI å®¡æŸ¥é€šè¿‡
- **é˜¶æ®µ 7**ï¼šåˆå¹¶éœ€äººå·¥ç¡®è®¤ï¼ˆé¡¹ç›®è¦æ±‚è§£å†³æ‰€æœ‰å¯¹è¯ï¼ŒCopilot/Qodo è¯„è®ºæ— æ³•æ ‡è®°è§£å†³ï¼‰

### 3.5 æœ‰å¤´éªŒæ”¶ï¼ˆå¼€å‘è€…å¯é€‰ï¼‰

éæ ‡å‡†æµç¨‹ï¼Œå¼€å‘è€…æ‰‹åŠ¨æ‰§è¡Œè§‚å¯Ÿ UIï¼š

```bash
rscore --dev  # å¯è§†åŒ–æ¨¡å¼ï¼ˆä¼˜å…ˆï¼‰
python main.py --dev  # é™çº§æ–¹æ¡ˆ
```

---

## 4. AI å®¡æŸ¥ç³»ç»Ÿ

### 4.1 å®¡æŸ¥æœºå™¨äºº

| æœºå™¨äºº | è§¦å‘æœºåˆ¶ |
|--------|----------|
| Copilot | å¯é…ç½®ï¼šPRåˆ›å»ºæ—¶/æ¯æ¬¡commit/æ‰‹åŠ¨ |
| sourcery-ai | PR åˆ›å»ºæ—¶è‡ªåŠ¨è§¦å‘ä¸€æ¬¡ |
| qodo-code-review | PR åˆ›å»ºæ—¶è‡ªåŠ¨è§¦å‘ä¸€æ¬¡ |

### 4.2 è¯„è®ºæ ¼å¼

**sourcery-ai**ï¼š`**issue (bug_risk):** é—®é¢˜æè¿°`

**Copilot**ï¼š````suggestion` ä»£ç å»ºè®®å—

**qodo**ï¼š`ğŸ Bug` SVG å›¾æ ‡ + Agent Prompt

### 4.3 å¤„ç†ç­–ç•¥

| æ ‡ç­¾ | Agent è¡Œä¸º |
|------|------------|
| `bug_risk`, `Bug`, `security` | å¿…é¡»ä¿®å¤ |
| `suggestion`, `performance` | è‡ªä¸»å†³æ–­ |
| `âœ… Addressed` | è·³è¿‡ï¼ˆå·²è§£å†³ï¼‰ |

### 4.4 PR æè¿°æ¨¡æ¿

```markdown
## æ¦‚è¿°
[ä¸€å¥è¯æè¿°]

## ä¸»è¦å˜æ›´
- [å˜æ›´åˆ—è¡¨]

## æµ‹è¯•ç»“æœ
- âœ… å•å…ƒæµ‹è¯•ï¼šX passed
```

---

## 5. Memory MCP çŸ¥è¯†ç®¡ç†

### 5.1 å®ä½“ç±»å‹

| ç±»å‹ | ç”¨é€” |
|------|------|
| Project | é¡¹ç›®ä¿¡æ¯ |
| Component | æ¨¡å—/ç»„ä»¶ |
| Pattern | è®¾è®¡æ¨¡å¼ |
| Error | é”™è¯¯æ¨¡å¼ |

### 5.2 ä½¿ç”¨æ—¶æœº

| åœºæ™¯ | æ“ä½œ |
|------|------|
| åŠŸèƒ½å®Œæˆ | è®°å½•æ¨¡å—ä¾èµ– |
| Bug ä¿®å¤ | è®°å½•é”™è¯¯æ¨¡å¼ |
| å¼€å§‹ä»»åŠ¡ | æŸ¥è¯¢ç›¸å…³ä¸Šä¸‹æ–‡ |

---

## 6. å®‰å…¨è¾¹ç•Œ

| è‡ªä¸»åŒº | ç¡®è®¤åŒº |
|--------|--------|
| è¯»å–/å†™å…¥æ–‡ä»¶ | `git push --force` |
| è¿è¡Œæµ‹è¯• | `merge PR`ï¼ˆæ‰€æœ‰ PRï¼‰ |
| æµè§ˆå™¨æ“ä½œ | åˆ é™¤è¿œç¨‹åˆ†æ”¯ |
| `git add/commit/push` | ä¿®æ”¹ä¿æŠ¤è§„åˆ™ |
| `git commit --amend`ï¼ˆæœª pushï¼‰ | æš´éœ² secrets |
| åˆ›å»º PR | |
